2024-05-09 15:16:00 INFO     ------------- Experiment: model ClinicalBERT, frequency threshold 121 ---------------
2024-05-09 15:16:00 INFO     Contexts were splited into 4977 sentence groups, which are 27.19672131147541 groups on average per one report
2024-05-09 15:16:01 INFO     Contexts were splited into 552 paragraphs, which are 3.0163934426229506 paragraphs on average per one report. There are 2 unique topics with frequency threshold (greater or equal) 121. The overall paragraph average length (characters) is 2212.0072463768115
2024-05-09 15:16:01 INFO     Contexts were splited into 818 sentence groups, which are 31.46153846153846 groups on average per one report
2024-05-09 15:16:02 INFO     Contexts were splited into 44 paragraphs, which are 1.6923076923076923 paragraphs on average per one report. There are 2 unique topics with frequency threshold (greater or equal) 121. The overall paragraph average length (characters) is 4164.931818181818
2024-05-09 15:16:02 INFO     Contexts were splited into 1362 sentence groups, which are 25.69811320754717 groups on average per one report
2024-05-09 15:16:03 WARNING  The evidenc 'CEFPODOXIME PROXETIL 200 MG PO BID X 16 doses
Food/Drug Interaction Instruction Give with meals
' is in wrong format and it does not occure in the paragraph 'POTENTIALLY SERIOUS INTERACTION: WARFARIN &amp; SIMVASTATIN
Reason for override: already tolerated , home medication ,
aware
CEFPODOXIME PROXETIL 200 MG PO BID X 16 doses
Starting Today ( 6/25 ) HOLD IF: rash
Food/Drug Interaction Instruction Give with meals
Alert overridden: Override added on 11/4/05 by :
on order for CEFPODOXIME PROXETIL PO ( ref # 703442345 )
Pt. has a POSSIBLE allergy to Penicillins; reaction is
RASH. Reason for override: cannot tolerate floroquinolones
and needs gram neg coverage. has
tolerated cefalosporins well in the past.
'
2024-05-09 15:16:03 INFO     Contexts were splited into 148 paragraphs, which are 2.792452830188679 paragraphs on average per one report. There are 2 unique topics with frequency threshold (greater or equal) 121. The overall paragraph average length (characters) is 2323.0337837837837
2024-05-09 15:16:12 INFO     datasets are converted to Datset format
Some weights of BertForQuestionAnswering were not initialized from the model checkpoint at ../models/Bio_ClinicalBERT and are newly initialized: ['qa_outputs.bias', 'qa_outputs.weight']
You should probably TRAIN this model on a down-stream task to be able to use it for predictions and inference.
2024-05-09 15:20:30 INFO     training data are prepared
/home/lanz/.local/lib/python3.10/site-packages/transformers/training_args.py:1463: FutureWarning: `evaluation_strategy` is deprecated and will be removed in version 4.46 of ðŸ¤— Transformers. Use `eval_strategy` instead
  warnings.warn(
2024-05-09 16:44:13 INFO     the model is trained
2024-05-09 16:49:55 INFO     evaluation data are prepared
2024-05-09 18:03:26 INFO     QA scores: {'exact_match': 29.990120699282677, 'f1': 71.0159800951599}
2024-05-09 18:03:26 INFO     PR scores: {'p@1': 0.9850736652205662, 'p@2': 0.9984966281517117, 'p@3': 0.9993986512606847}
2024-05-09 18:03:28 INFO     PRQA scores: {'exact_match': 29.72595678879773, 'f1': 70.6086088578323}
{'loss': 1.0036, 'grad_norm': 3.3102564811706543, 'learning_rate': 2.89871024377068e-05, 'epoch': 0.03376325207644}
{'loss': 0.6493, 'grad_norm': 1.7959473133087158, 'learning_rate': 2.79742048754136e-05, 'epoch': 0.06752650415288}
{'loss': 0.5903, 'grad_norm': 7.643807888031006, 'learning_rate': 2.69613073131204e-05, 'epoch': 0.10128975622932}
{'loss': 0.5366, 'grad_norm': 6.331747531890869, 'learning_rate': 2.5948409750827198e-05, 'epoch': 0.13505300830576}
{'loss': 0.4759, 'grad_norm': 5.630559921264648, 'learning_rate': 2.4935512188534e-05, 'epoch': 0.16881626038220002}
{'loss': 0.4752, 'grad_norm': 1.6192457675933838, 'learning_rate': 2.39226146262408e-05, 'epoch': 0.20257951245864}
{'loss': 0.4569, 'grad_norm': 2.5009145736694336, 'learning_rate': 2.2909717063947598e-05, 'epoch': 0.23634276453508002}
{'loss': 0.4005, 'grad_norm': 5.61589241027832, 'learning_rate': 2.18968195016544e-05, 'epoch': 0.27010601661152}
{'loss': 0.3704, 'grad_norm': 3.149564504623413, 'learning_rate': 2.0883921939361198e-05, 'epoch': 0.30386926868796005}
{'loss': 0.3528, 'grad_norm': 18.41652488708496, 'learning_rate': 1.9871024377068e-05, 'epoch': 0.33763252076440003}
{'loss': 0.3176, 'grad_norm': 5.462146759033203, 'learning_rate': 1.88581268147748e-05, 'epoch': 0.37139577284084}
{'loss': 0.2942, 'grad_norm': 19.273008346557617, 'learning_rate': 1.7845229252481598e-05, 'epoch': 0.40515902491728}
{'loss': 0.3014, 'grad_norm': 13.440889358520508, 'learning_rate': 1.68323316901884e-05, 'epoch': 0.43892227699372005}
{'loss': 0.2753, 'grad_norm': 5.375489234924316, 'learning_rate': 1.5819434127895198e-05, 'epoch': 0.47268552907016004}
{'loss': 0.2469, 'grad_norm': 6.9434332847595215, 'learning_rate': 1.4806536565602e-05, 'epoch': 0.5064487811466001}
{'loss': 0.2441, 'grad_norm': 9.631874084472656, 'learning_rate': 1.3793639003308798e-05, 'epoch': 0.54021203322304}
{'loss': 0.2284, 'grad_norm': 3.238802433013916, 'learning_rate': 1.2780741441015598e-05, 'epoch': 0.57397528529948}
{'loss': 0.2002, 'grad_norm': 12.935894966125488, 'learning_rate': 1.1767843878722398e-05, 'epoch': 0.6077385373759201}
{'loss': 0.2041, 'grad_norm': 13.19677734375, 'learning_rate': 1.07549463164292e-05, 'epoch': 0.64150178945236}
{'loss': 0.1979, 'grad_norm': 10.24937629699707, 'learning_rate': 9.742048754135998e-06, 'epoch': 0.6752650415288001}
{'loss': 0.1872, 'grad_norm': 1.6211159229278564, 'learning_rate': 8.729151191842798e-06, 'epoch': 0.7090282936052401}
{'loss': 0.1777, 'grad_norm': 10.883086204528809, 'learning_rate': 7.716253629549599e-06, 'epoch': 0.74279154568168}
{'loss': 0.1529, 'grad_norm': 1.1618739366531372, 'learning_rate': 6.703356067256399e-06, 'epoch': 0.7765547977581201}
{'loss': 0.1714, 'grad_norm': 0.008272355422377586, 'learning_rate': 5.690458504963198e-06, 'epoch': 0.81031804983456}
{'loss': 0.1554, 'grad_norm': 3.3391737937927246, 'learning_rate': 4.677560942669999e-06, 'epoch': 0.8440813019110001}
{'loss': 0.1471, 'grad_norm': 7.036660194396973, 'learning_rate': 3.664663380376798e-06, 'epoch': 0.8778445539874401}
{'loss': 0.1309, 'grad_norm': 3.759408473968506, 'learning_rate': 2.651765818083598e-06, 'epoch': 0.91160780606388}
{'loss': 0.15, 'grad_norm': 12.151605606079102, 'learning_rate': 1.6388682557903978e-06, 'epoch': 0.9453710581403201}
{'loss': 0.1421, 'grad_norm': 6.7161173820495605, 'learning_rate': 6.259706934971977e-07, 'epoch': 0.9791343102167601}
{'eval_loss': 0.8607441782951355, 'eval_runtime': 1014.271, 'eval_samples_per_second': 178.685, 'eval_steps_per_second': 0.698, 'epoch': 1.0}
{'train_runtime': 5022.281, 'train_samples_per_second': 47.178, 'train_steps_per_second': 2.949, 'train_loss': 0.31469632386436774, 'epoch': 1.0}
Post-processing 138930 example predictions split into 440344 features.
{
    "121": {
        "QA": {
            "exact_match": 29.990120699282677,
            "f1": 71.0159800951599
        },
        "PR": {
            "p@1": 0.9850736652205662,
            "p@2": 0.9984966281517117,
            "p@3": 0.9993986512606847
        },
        "PRQA": {
            "exact_match": 29.72595678879773,
            "f1": 70.6086088578323
        }
    }
}
slurmstepd: error: common_file_write_uint32s: write pid 2662051 to /sys/fs/cgroup/cgroup.procs failed: Device or resource busy
slurmstepd: error: Unable to move pid 2662051 to init root cgroup /sys/fs/cgroup
slurmstepd: error: error unlocking cgroup '/sys/fs/cgroup/system.slice/slurmstepd.scope' : Bad file descriptor
