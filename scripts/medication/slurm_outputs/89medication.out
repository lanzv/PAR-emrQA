2024-05-06 21:05:53 INFO     ------------- Experiment: model ClinicalBERT, frequency threshold 89 ---------------
2024-05-06 21:05:53 INFO     Contexts were splited into 4977 sentence groups, which are 27.19672131147541 groups on average per one report
2024-05-06 21:05:54 INFO     Contexts were splited into 980 paragraphs, which are 5.355191256830601 paragraphs on average per one report. There are 6 unique topics with frequency threshold (greater or equal) 89. The overall paragraph average length (characters) is 1245.9469387755103
2024-05-06 21:05:55 INFO     Contexts were splited into 818 sentence groups, which are 31.46153846153846 groups on average per one report
2024-05-06 21:05:55 INFO     Contexts were splited into 110 paragraphs, which are 4.230769230769231 paragraphs on average per one report. There are 6 unique topics with frequency threshold (greater or equal) 89. The overall paragraph average length (characters) is 1665.9727272727273
2024-05-06 21:05:56 INFO     Contexts were splited into 1362 sentence groups, which are 25.69811320754717 groups on average per one report
2024-05-06 21:05:57 WARNING  The evidenc 'CEFPODOXIME PROXETIL 200 MG PO BID X 16 doses
Food/Drug Interaction Instruction Give with meals
' is in wrong format and it does not occure in the paragraph 'POTENTIALLY SERIOUS INTERACTION: WARFARIN &amp; SIMVASTATIN
Reason for override: already tolerated , home medication ,
aware
CEFPODOXIME PROXETIL 200 MG PO BID X 16 doses
Starting Today ( 6/25 ) HOLD IF: rash
Food/Drug Interaction Instruction Give with meals
Alert overridden: Override added on 11/4/05 by :
on order for CEFPODOXIME PROXETIL PO ( ref # 703442345 )
Pt. has a POSSIBLE allergy to Penicillins; reaction is
RASH. Reason for override: cannot tolerate floroquinolones
and needs gram neg coverage. has
tolerated cefalosporins well in the past.
'
2024-05-06 21:05:57 INFO     Contexts were splited into 274 paragraphs, which are 5.169811320754717 paragraphs on average per one report. There are 6 unique topics with frequency threshold (greater or equal) 89. The overall paragraph average length (characters) is 1254.7773722627737
2024-05-06 21:06:06 INFO     datasets are converted to Datset format
Some weights of BertForQuestionAnswering were not initialized from the model checkpoint at ../models/Bio_ClinicalBERT and are newly initialized: ['qa_outputs.bias', 'qa_outputs.weight']
You should probably TRAIN this model on a down-stream task to be able to use it for predictions and inference.
2024-05-06 21:09:53 INFO     training data are prepared
/home/lanz/.local/lib/python3.10/site-packages/transformers/training_args.py:1463: FutureWarning: `evaluation_strategy` is deprecated and will be removed in version 4.46 of ðŸ¤— Transformers. Use `eval_strategy` instead
  warnings.warn(
2024-05-06 22:24:36 INFO     the model is trained
2024-05-06 22:30:53 INFO     evaluation data are prepared
2024-05-06 23:56:22 INFO     QA scores: {'exact_match': 30.39603109832052, 'f1': 71.46278870873569}
2024-05-06 23:56:22 INFO     PR scores: {'p@1': 0.9655727846741978, 'p@2': 0.9968643958592844, 'p@3': 0.9988617327434388}
2024-05-06 23:56:25 INFO     PRQA scores: {'exact_match': 29.824749795970963, 'f1': 70.09430427767802}
{'loss': 1.0719, 'grad_norm': 9.792494773864746, 'learning_rate': 2.8851894374282434e-05, 'epoch': 0.038270187523918864}
{'loss': 0.6779, 'grad_norm': 9.704367637634277, 'learning_rate': 2.770378874856487e-05, 'epoch': 0.07654037504783773}
{'loss': 0.6129, 'grad_norm': 13.935624122619629, 'learning_rate': 2.6555683122847303e-05, 'epoch': 0.1148105625717566}
{'loss': 0.5595, 'grad_norm': 9.972631454467773, 'learning_rate': 2.5407577497129736e-05, 'epoch': 0.15308075009567546}
{'loss': 0.4984, 'grad_norm': 6.325349807739258, 'learning_rate': 2.4259471871412173e-05, 'epoch': 0.19135093761959435}
{'loss': 0.4577, 'grad_norm': 6.433822154998779, 'learning_rate': 2.3111366245694606e-05, 'epoch': 0.2296211251435132}
{'loss': 0.4283, 'grad_norm': 25.205408096313477, 'learning_rate': 2.196326061997704e-05, 'epoch': 0.26789131266743205}
{'loss': 0.382, 'grad_norm': 7.029825687408447, 'learning_rate': 2.0815154994259472e-05, 'epoch': 0.3061615001913509}
{'loss': 0.3685, 'grad_norm': 11.442378044128418, 'learning_rate': 1.9667049368541908e-05, 'epoch': 0.34443168771526983}
{'loss': 0.3441, 'grad_norm': 6.733416557312012, 'learning_rate': 1.851894374282434e-05, 'epoch': 0.3827018752391887}
{'loss': 0.3293, 'grad_norm': 12.356573104858398, 'learning_rate': 1.7370838117106774e-05, 'epoch': 0.42097206276310756}
{'loss': 0.3149, 'grad_norm': 25.8243408203125, 'learning_rate': 1.622273249138921e-05, 'epoch': 0.4592422502870264}
{'loss': 0.2834, 'grad_norm': 7.518624782562256, 'learning_rate': 1.5074626865671644e-05, 'epoch': 0.4975124378109453}
{'loss': 0.2642, 'grad_norm': 12.146537780761719, 'learning_rate': 1.3926521239954075e-05, 'epoch': 0.5357826253348641}
{'loss': 0.2637, 'grad_norm': 9.642256736755371, 'learning_rate': 1.277841561423651e-05, 'epoch': 0.574052812858783}
{'loss': 0.2446, 'grad_norm': 7.4492692947387695, 'learning_rate': 1.1630309988518945e-05, 'epoch': 0.6123230003827018}
{'loss': 0.2288, 'grad_norm': 6.915541172027588, 'learning_rate': 1.0482204362801378e-05, 'epoch': 0.6505931879066208}
{'loss': 0.2298, 'grad_norm': 8.964130401611328, 'learning_rate': 9.334098737083812e-06, 'epoch': 0.6888633754305397}
{'loss': 0.2086, 'grad_norm': 8.433772087097168, 'learning_rate': 8.185993111366245e-06, 'epoch': 0.7271335629544585}
{'loss': 0.1963, 'grad_norm': 8.736859321594238, 'learning_rate': 7.03788748564868e-06, 'epoch': 0.7654037504783774}
{'loss': 0.1917, 'grad_norm': 13.012652397155762, 'learning_rate': 5.889781859931113e-06, 'epoch': 0.8036739380022963}
{'loss': 0.1764, 'grad_norm': 4.381252288818359, 'learning_rate': 4.741676234213548e-06, 'epoch': 0.8419441255262151}
{'loss': 0.1846, 'grad_norm': 0.04475973919034004, 'learning_rate': 3.5935706084959817e-06, 'epoch': 0.880214313050134}
{'loss': 0.1745, 'grad_norm': 9.268778800964355, 'learning_rate': 2.4454649827784156e-06, 'epoch': 0.9184845005740528}
{'loss': 0.1708, 'grad_norm': 1.1462925672531128, 'learning_rate': 1.2973593570608497e-06, 'epoch': 0.9567546880979717}
{'loss': 0.1453, 'grad_norm': 9.100580215454102, 'learning_rate': 1.4925373134328358e-07, 'epoch': 0.9950248756218906}
{'eval_loss': 0.7982344627380371, 'eval_runtime': 931.6044, 'eval_samples_per_second': 178.165, 'eval_steps_per_second': 0.697, 'epoch': 1.0}
{'train_runtime': 4482.1538, 'train_samples_per_second': 46.637, 'train_steps_per_second': 2.915, 'train_loss': 0.3455036934882893, 'epoch': 1.0}
Post-processing 251162 example predictions split into 512118 features.
{
    "89": {
        "QA": {
            "exact_match": 30.39603109832052,
            "f1": 71.46278870873569
        },
        "PR": {
            "p@1": 0.9655727846741978,
            "p@2": 0.9968643958592844,
            "p@3": 0.9988617327434388
        },
        "PRQA": {
            "exact_match": 29.824749795970963,
            "f1": 70.09430427767802
        }
    }
}
slurmstepd: error: common_file_write_uint32s: write pid 3649357 to /sys/fs/cgroup/cgroup.procs failed: Device or resource busy
slurmstepd: error: Unable to move pid 3649357 to init root cgroup /sys/fs/cgroup
slurmstepd: error: error unlocking cgroup '/sys/fs/cgroup/system.slice/slurmstepd.scope' : Bad file descriptor
