2024-05-09 15:16:00 INFO     ------------- Experiment: model ClinicalBERT, frequency threshold 66 ---------------
2024-05-09 15:16:00 INFO     Contexts were splited into 4977 sentence groups, which are 27.19672131147541 groups on average per one report
2024-05-09 15:16:01 INFO     Contexts were splited into 1950 paragraphs, which are 10.655737704918034 paragraphs on average per one report. There are 19 unique topics with frequency threshold (greater or equal) 66. The overall paragraph average length (characters) is 626.1682051282052
2024-05-09 15:16:01 INFO     Contexts were splited into 818 sentence groups, which are 31.46153846153846 groups on average per one report
2024-05-09 15:16:01 INFO     Contexts were splited into 229 paragraphs, which are 8.807692307692308 paragraphs on average per one report. There are 19 unique topics with frequency threshold (greater or equal) 66. The overall paragraph average length (characters) is 800.2489082969432
2024-05-09 15:16:02 INFO     Contexts were splited into 1362 sentence groups, which are 25.69811320754717 groups on average per one report
2024-05-09 15:16:03 WARNING  The evidenc 'CEFPODOXIME PROXETIL 200 MG PO BID X 16 doses
Food/Drug Interaction Instruction Give with meals
' is in wrong format and it does not occure in the paragraph 'POTENTIALLY SERIOUS INTERACTION: WARFARIN &amp; SIMVASTATIN
Reason for override: already tolerated , home medication ,
aware
CEFPODOXIME PROXETIL 200 MG PO BID X 16 doses
Starting Today ( 6/25 ) HOLD IF: rash
Food/Drug Interaction Instruction Give with meals
Alert overridden: Override added on 11/4/05 by :
on order for CEFPODOXIME PROXETIL PO ( ref # 703442345 )
Pt. has a POSSIBLE allergy to Penicillins; reaction is
RASH. Reason for override: cannot tolerate floroquinolones
and needs gram neg coverage. has
tolerated cefalosporins well in the past.
'
2024-05-09 15:16:03 INFO     Contexts were splited into 555 paragraphs, which are 10.471698113207546 paragraphs on average per one report. There are 19 unique topics with frequency threshold (greater or equal) 66. The overall paragraph average length (characters) is 619.4756756756757
2024-05-09 15:16:13 INFO     datasets are converted to Datset format
Some weights of BertForQuestionAnswering were not initialized from the model checkpoint at ../models/Bio_ClinicalBERT and are newly initialized: ['qa_outputs.bias', 'qa_outputs.weight']
You should probably TRAIN this model on a down-stream task to be able to use it for predictions and inference.
2024-05-09 15:18:35 INFO     training data are prepared
/home/lanz/.local/lib/python3.10/site-packages/transformers/training_args.py:1463: FutureWarning: `evaluation_strategy` is deprecated and will be removed in version 4.46 of ðŸ¤— Transformers. Use `eval_strategy` instead
  warnings.warn(
2024-05-09 16:06:29 INFO     the model is trained
2024-05-09 16:13:34 INFO     evaluation data are prepared
2024-05-09 18:01:56 INFO     QA scores: {'exact_match': 30.38314505390662, 'f1': 72.35935890446025}
2024-05-09 18:01:56 INFO     PR scores: {'p@1': 0.9183454318972553, 'p@2': 0.986254885958507, 'p@3': 0.9989905931875779}
2024-05-09 18:01:59 INFO     PRQA scores: {'exact_match': 29.19118594562089, 'f1': 69.3528733761713}
{'loss': 1.2791, 'grad_norm': 6.930627346038818, 'learning_rate': 2.8256422178309895e-05, 'epoch': 0.0581192607230036}
{'loss': 0.7833, 'grad_norm': 2.9589760303497314, 'learning_rate': 2.6512844356619785e-05, 'epoch': 0.1162385214460072}
{'loss': 0.691, 'grad_norm': 9.32564926147461, 'learning_rate': 2.476926653492968e-05, 'epoch': 0.17435778216901082}
{'loss': 0.6262, 'grad_norm': 7.829860687255859, 'learning_rate': 2.302568871323957e-05, 'epoch': 0.2324770428920144}
{'loss': 0.5505, 'grad_norm': 8.139164924621582, 'learning_rate': 2.128211089154946e-05, 'epoch': 0.29059630361501804}
{'loss': 0.4999, 'grad_norm': 8.65165901184082, 'learning_rate': 1.953853306985935e-05, 'epoch': 0.34871556433802164}
{'loss': 0.4489, 'grad_norm': 11.381963729858398, 'learning_rate': 1.7794955248169244e-05, 'epoch': 0.40683482506102525}
{'loss': 0.3993, 'grad_norm': 10.946515083312988, 'learning_rate': 1.6051377426479135e-05, 'epoch': 0.4649540857840288}
{'loss': 0.3719, 'grad_norm': 13.092735290527344, 'learning_rate': 1.4307799604789028e-05, 'epoch': 0.5230733465070324}
{'loss': 0.3395, 'grad_norm': 10.999768257141113, 'learning_rate': 1.256422178309892e-05, 'epoch': 0.5811926072300361}
{'loss': 0.3292, 'grad_norm': 8.604835510253906, 'learning_rate': 1.0820643961408811e-05, 'epoch': 0.6393118679530396}
{'loss': 0.2781, 'grad_norm': 8.348953247070312, 'learning_rate': 9.077066139718703e-06, 'epoch': 0.6974311286760433}
{'loss': 0.2647, 'grad_norm': 12.39408016204834, 'learning_rate': 7.333488318028595e-06, 'epoch': 0.7555503893990468}
{'loss': 0.2536, 'grad_norm': 0.27729132771492004, 'learning_rate': 5.589910496338487e-06, 'epoch': 0.8136696501220505}
{'loss': 0.2402, 'grad_norm': 12.044478416442871, 'learning_rate': 3.846332674648379e-06, 'epoch': 0.871788910845054}
{'loss': 0.2272, 'grad_norm': 29.392269134521484, 'learning_rate': 2.1027548529582705e-06, 'epoch': 0.9299081715680576}
{'loss': 0.2152, 'grad_norm': 5.10602331161499, 'learning_rate': 3.591770312681623e-07, 'epoch': 0.9880274322910613}
{'eval_loss': 1.1227672100067139, 'eval_runtime': 558.2108, 'eval_samples_per_second': 179.4, 'eval_steps_per_second': 0.702, 'epoch': 1.0}
{'train_runtime': 2873.6467, 'train_samples_per_second': 47.897, 'train_steps_per_second': 2.994, 'train_loss': 0.4553120996762774, 'epoch': 1.0}
Post-processing 494814 example predictions split into 655321 features.
{
    "66": {
        "QA": {
            "exact_match": 30.38314505390662,
            "f1": 72.35935890446025
        },
        "PR": {
            "p@1": 0.9183454318972553,
            "p@2": 0.986254885958507,
            "p@3": 0.9989905931875779
        },
        "PRQA": {
            "exact_match": 29.19118594562089,
            "f1": 69.3528733761713
        }
    }
}
slurmstepd: error: common_file_write_uint32s: write pid 2740691 to /sys/fs/cgroup/cgroup.procs failed: Device or resource busy
slurmstepd: error: Unable to move pid 2740691 to init root cgroup /sys/fs/cgroup
slurmstepd: error: error unlocking cgroup '/sys/fs/cgroup/system.slice/slurmstepd.scope' : Bad file descriptor
