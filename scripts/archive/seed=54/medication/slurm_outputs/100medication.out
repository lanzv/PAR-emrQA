2024-05-06 21:05:55 INFO     ------------- Experiment: model ClinicalBERT, frequency threshold 100 ---------------
2024-05-06 21:05:56 INFO     Contexts were splited into 4977 sentence groups, which are 27.19672131147541 groups on average per one report
2024-05-06 21:05:56 INFO     Contexts were splited into 790 paragraphs, which are 4.316939890710382 paragraphs on average per one report. There are 4 unique topics with frequency threshold (greater or equal) 100. The overall paragraph average length (characters) is 1545.6050632911392
2024-05-06 21:05:57 INFO     Contexts were splited into 818 sentence groups, which are 31.46153846153846 groups on average per one report
2024-05-06 21:05:57 INFO     Contexts were splited into 74 paragraphs, which are 2.8461538461538463 paragraphs on average per one report. There are 4 unique topics with frequency threshold (greater or equal) 100. The overall paragraph average length (characters) is 2476.445945945946
2024-05-06 21:05:57 INFO     Contexts were splited into 1362 sentence groups, which are 25.69811320754717 groups on average per one report
2024-05-06 21:05:58 WARNING  The evidenc 'CEFPODOXIME PROXETIL 200 MG PO BID X 16 doses
Food/Drug Interaction Instruction Give with meals
' is in wrong format and it does not occure in the paragraph 'POTENTIALLY SERIOUS INTERACTION: WARFARIN &amp; SIMVASTATIN
Reason for override: already tolerated , home medication ,
aware
CEFPODOXIME PROXETIL 200 MG PO BID X 16 doses
Starting Today ( 6/25 ) HOLD IF: rash
Food/Drug Interaction Instruction Give with meals
Alert overridden: Override added on 11/4/05 by :
on order for CEFPODOXIME PROXETIL PO ( ref # 703442345 )
Pt. has a POSSIBLE allergy to Penicillins; reaction is
RASH. Reason for override: cannot tolerate floroquinolones
and needs gram neg coverage. has
tolerated cefalosporins well in the past.
'
2024-05-06 21:05:58 INFO     Contexts were splited into 224 paragraphs, which are 4.226415094339623 paragraphs on average per one report. There are 4 unique topics with frequency threshold (greater or equal) 100. The overall paragraph average length (characters) is 1534.861607142857
2024-05-06 21:06:07 INFO     datasets are converted to Datset format
Some weights of BertForQuestionAnswering were not initialized from the model checkpoint at ../models/Bio_ClinicalBERT and are newly initialized: ['qa_outputs.bias', 'qa_outputs.weight']
You should probably TRAIN this model on a down-stream task to be able to use it for predictions and inference.
2024-05-06 21:10:06 INFO     training data are prepared
/home/lanz/.local/lib/python3.10/site-packages/transformers/training_args.py:1463: FutureWarning: `evaluation_strategy` is deprecated and will be removed in version 4.46 of ðŸ¤— Transformers. Use `eval_strategy` instead
  warnings.warn(
2024-05-06 22:28:50 INFO     the model is trained
2024-05-06 22:34:44 INFO     evaluation data are prepared
2024-05-06 23:54:13 INFO     QA scores: {'exact_match': 31.207851896396203, 'f1': 72.59346471263972}
2024-05-06 23:54:13 INFO     PR scores: {'p@1': 0.9614492504617499, 'p@2': 0.9967999656372148, 'p@3': 0.9996993256303424}
2024-05-06 23:54:16 INFO     PRQA scores: {'exact_match': 30.215626476525923, 'f1': 71.1506219829507}
{'loss': 1.1628, 'grad_norm': 5.157294273376465, 'learning_rate': 2.8915871639202083e-05, 'epoch': 0.03613761202659728}
{'loss': 0.6832, 'grad_norm': 4.265233993530273, 'learning_rate': 2.7831743278404166e-05, 'epoch': 0.07227522405319456}
{'loss': 0.6363, 'grad_norm': 4.718451023101807, 'learning_rate': 2.6747614917606248e-05, 'epoch': 0.10841283607979185}
{'loss': 0.5386, 'grad_norm': 6.771426200866699, 'learning_rate': 2.5663486556808327e-05, 'epoch': 0.14455044810638912}
{'loss': 0.5115, 'grad_norm': 19.595264434814453, 'learning_rate': 2.4579358196010406e-05, 'epoch': 0.1806880601329864}
{'loss': 0.4817, 'grad_norm': 10.886429786682129, 'learning_rate': 2.3495229835212488e-05, 'epoch': 0.2168256721595837}
{'loss': 0.4356, 'grad_norm': 6.838949680328369, 'learning_rate': 2.241110147441457e-05, 'epoch': 0.25296328418618097}
{'loss': 0.3964, 'grad_norm': 0.6929143667221069, 'learning_rate': 2.1326973113616653e-05, 'epoch': 0.28910089621277824}
{'loss': 0.4118, 'grad_norm': 8.320515632629395, 'learning_rate': 2.0242844752818735e-05, 'epoch': 0.32523850823937556}
{'loss': 0.363, 'grad_norm': 5.446075916290283, 'learning_rate': 1.9158716392020814e-05, 'epoch': 0.3613761202659728}
{'loss': 0.3335, 'grad_norm': 11.135104179382324, 'learning_rate': 1.8074588031222897e-05, 'epoch': 0.3975137322925701}
{'loss': 0.2933, 'grad_norm': 11.030393600463867, 'learning_rate': 1.699045967042498e-05, 'epoch': 0.4336513443191674}
{'loss': 0.2889, 'grad_norm': 17.00734519958496, 'learning_rate': 1.590633130962706e-05, 'epoch': 0.4697889563457647}
{'loss': 0.2543, 'grad_norm': 13.316234588623047, 'learning_rate': 1.4822202948829142e-05, 'epoch': 0.5059265683723619}
{'loss': 0.2688, 'grad_norm': 16.737220764160156, 'learning_rate': 1.3738074588031223e-05, 'epoch': 0.5420641803989592}
{'loss': 0.2364, 'grad_norm': 15.303605079650879, 'learning_rate': 1.2653946227233305e-05, 'epoch': 0.5782017924255565}
{'loss': 0.2339, 'grad_norm': 5.374250411987305, 'learning_rate': 1.1569817866435386e-05, 'epoch': 0.6143394044521538}
{'loss': 0.2192, 'grad_norm': 0.15040750801563263, 'learning_rate': 1.0485689505637468e-05, 'epoch': 0.6504770164787511}
{'loss': 0.2181, 'grad_norm': 24.009130477905273, 'learning_rate': 9.401561144839549e-06, 'epoch': 0.6866146285053484}
{'loss': 0.1909, 'grad_norm': 18.838354110717773, 'learning_rate': 8.317432784041631e-06, 'epoch': 0.7227522405319456}
{'loss': 0.2001, 'grad_norm': 1.1881753206253052, 'learning_rate': 7.233304423243712e-06, 'epoch': 0.7588898525585429}
{'loss': 0.1734, 'grad_norm': 8.780677795410156, 'learning_rate': 6.149176062445794e-06, 'epoch': 0.7950274645851402}
{'loss': 0.1873, 'grad_norm': 8.990689277648926, 'learning_rate': 5.065047701647875e-06, 'epoch': 0.8311650766117374}
{'loss': 0.1733, 'grad_norm': 2.4988934993743896, 'learning_rate': 3.980919340849957e-06, 'epoch': 0.8673026886383348}
{'loss': 0.165, 'grad_norm': 0.10171010345220566, 'learning_rate': 2.8967909800520386e-06, 'epoch': 0.9034403006649321}
{'loss': 0.1516, 'grad_norm': 6.9942755699157715, 'learning_rate': 1.8126626192541197e-06, 'epoch': 0.9395779126915293}
{'loss': 0.1508, 'grad_norm': 14.631491661071777, 'learning_rate': 7.285342584562013e-07, 'epoch': 0.9757155247181266}
{'eval_loss': 0.8413243293762207, 'eval_runtime': 986.9157, 'eval_samples_per_second': 178.918, 'eval_steps_per_second': 0.699, 'epoch': 1.0}
{'train_runtime': 4722.1865, 'train_samples_per_second': 46.879, 'train_steps_per_second': 2.93, 'train_loss': 0.3421027127563971, 'epoch': 1.0}
Post-processing 205344 example predictions split into 474369 features.
{
    "100": {
        "QA": {
            "exact_match": 31.207851896396203,
            "f1": 72.59346471263972
        },
        "PR": {
            "p@1": 0.9614492504617499,
            "p@2": 0.9967999656372148,
            "p@3": 0.9996993256303424
        },
        "PRQA": {
            "exact_match": 30.215626476525923,
            "f1": 71.1506219829507
        }
    }
}
slurmstepd: error: common_file_write_uint32s: write pid 3649380 to /sys/fs/cgroup/cgroup.procs failed: Device or resource busy
slurmstepd: error: Unable to move pid 3649380 to init root cgroup /sys/fs/cgroup
slurmstepd: error: error unlocking cgroup '/sys/fs/cgroup/system.slice/slurmstepd.scope' : Bad file descriptor
