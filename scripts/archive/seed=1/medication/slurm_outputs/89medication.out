2024-05-09 15:16:00 INFO     ------------- Experiment: model ClinicalBERT, frequency threshold 89 ---------------
2024-05-09 15:16:00 INFO     Contexts were splited into 4977 sentence groups, which are 27.19672131147541 groups on average per one report
2024-05-09 15:16:01 INFO     Contexts were splited into 980 paragraphs, which are 5.355191256830601 paragraphs on average per one report. There are 6 unique topics with frequency threshold (greater or equal) 89. The overall paragraph average length (characters) is 1245.9469387755103
2024-05-09 15:16:01 INFO     Contexts were splited into 818 sentence groups, which are 31.46153846153846 groups on average per one report
2024-05-09 15:16:02 INFO     Contexts were splited into 110 paragraphs, which are 4.230769230769231 paragraphs on average per one report. There are 6 unique topics with frequency threshold (greater or equal) 89. The overall paragraph average length (characters) is 1665.9727272727273
2024-05-09 15:16:02 INFO     Contexts were splited into 1362 sentence groups, which are 25.69811320754717 groups on average per one report
2024-05-09 15:16:03 WARNING  The evidenc 'CEFPODOXIME PROXETIL 200 MG PO BID X 16 doses
Food/Drug Interaction Instruction Give with meals
' is in wrong format and it does not occure in the paragraph 'POTENTIALLY SERIOUS INTERACTION: WARFARIN &amp; SIMVASTATIN
Reason for override: already tolerated , home medication ,
aware
CEFPODOXIME PROXETIL 200 MG PO BID X 16 doses
Starting Today ( 6/25 ) HOLD IF: rash
Food/Drug Interaction Instruction Give with meals
Alert overridden: Override added on 11/4/05 by :
on order for CEFPODOXIME PROXETIL PO ( ref # 703442345 )
Pt. has a POSSIBLE allergy to Penicillins; reaction is
RASH. Reason for override: cannot tolerate floroquinolones
and needs gram neg coverage. has
tolerated cefalosporins well in the past.
'
2024-05-09 15:16:03 INFO     Contexts were splited into 274 paragraphs, which are 5.169811320754717 paragraphs on average per one report. There are 6 unique topics with frequency threshold (greater or equal) 89. The overall paragraph average length (characters) is 1254.7773722627737
2024-05-09 15:16:12 INFO     datasets are converted to Datset format
Some weights of BertForQuestionAnswering were not initialized from the model checkpoint at ../models/Bio_ClinicalBERT and are newly initialized: ['qa_outputs.bias', 'qa_outputs.weight']
You should probably TRAIN this model on a down-stream task to be able to use it for predictions and inference.
2024-05-09 15:19:58 INFO     training data are prepared
/home/lanz/.local/lib/python3.10/site-packages/transformers/training_args.py:1463: FutureWarning: `evaluation_strategy` is deprecated and will be removed in version 4.46 of ðŸ¤— Transformers. Use `eval_strategy` instead
  warnings.warn(
2024-05-09 16:34:30 INFO     the model is trained
2024-05-09 16:40:48 INFO     evaluation data are prepared
2024-05-09 18:06:12 INFO     QA scores: {'exact_match': 30.224217172801854, 'f1': 72.26240312108538}
2024-05-09 18:06:12 INFO     PR scores: {'p@1': 0.9626304711996907, 'p@2': 0.9981959537820541, 'p@3': 0.9993986512606847}
2024-05-09 18:06:15 INFO     PRQA scores: {'exact_match': 29.418839396933123, 'f1': 70.8223022074591}
{'loss': 1.0937, 'grad_norm': 23.12255859375, 'learning_rate': 2.8848898779832706e-05, 'epoch': 0.03837004067224311}
{'loss': 0.6634, 'grad_norm': 4.521757125854492, 'learning_rate': 2.7697797559665415e-05, 'epoch': 0.07674008134448622}
{'loss': 0.6111, 'grad_norm': 11.521845817565918, 'learning_rate': 2.654669633949812e-05, 'epoch': 0.11511012201672934}
{'loss': 0.5563, 'grad_norm': 7.279463291168213, 'learning_rate': 2.5395595119330826e-05, 'epoch': 0.15348016268897244}
{'loss': 0.5035, 'grad_norm': 6.602870464324951, 'learning_rate': 2.424449389916353e-05, 'epoch': 0.19185020336121555}
{'loss': 0.4709, 'grad_norm': 7.452093124389648, 'learning_rate': 2.309339267899624e-05, 'epoch': 0.23022024403345867}
{'loss': 0.4246, 'grad_norm': 9.009207725524902, 'learning_rate': 2.1942291458828946e-05, 'epoch': 0.2685902847057018}
{'loss': 0.3907, 'grad_norm': 11.071455001831055, 'learning_rate': 2.079119023866165e-05, 'epoch': 0.3069603253779449}
{'loss': 0.3715, 'grad_norm': 9.391934394836426, 'learning_rate': 1.9640089018494363e-05, 'epoch': 0.345330366050188}
{'loss': 0.3328, 'grad_norm': 7.901174068450928, 'learning_rate': 1.848898779832707e-05, 'epoch': 0.3837004067224311}
{'loss': 0.3378, 'grad_norm': 5.159400939941406, 'learning_rate': 1.7337886578159774e-05, 'epoch': 0.42207044739467425}
{'loss': 0.3049, 'grad_norm': 3.7538416385650635, 'learning_rate': 1.618678535799248e-05, 'epoch': 0.46044048806691734}
{'loss': 0.2762, 'grad_norm': 17.17953109741211, 'learning_rate': 1.5035684137825188e-05, 'epoch': 0.4988105287391605}
{'loss': 0.2709, 'grad_norm': 0.027535419911146164, 'learning_rate': 1.3884582917657894e-05, 'epoch': 0.5371805694114036}
{'loss': 0.248, 'grad_norm': 16.2370662689209, 'learning_rate': 1.27334816974906e-05, 'epoch': 0.5755506100836467}
{'loss': 0.2287, 'grad_norm': 12.44309139251709, 'learning_rate': 1.1582380477323306e-05, 'epoch': 0.6139206507558898}
{'loss': 0.2243, 'grad_norm': 21.134174346923828, 'learning_rate': 1.0431279257156013e-05, 'epoch': 0.6522906914281329}
{'loss': 0.2046, 'grad_norm': 3.5379140377044678, 'learning_rate': 9.280178036988719e-06, 'epoch': 0.690660732100376}
{'loss': 0.1995, 'grad_norm': 20.050750732421875, 'learning_rate': 8.129076816821426e-06, 'epoch': 0.7290307727726192}
{'loss': 0.1962, 'grad_norm': 2.630333185195923, 'learning_rate': 6.977975596654133e-06, 'epoch': 0.7674008134448622}
{'loss': 0.1947, 'grad_norm': 14.848286628723145, 'learning_rate': 5.826874376486839e-06, 'epoch': 0.8057708541171054}
{'loss': 0.1608, 'grad_norm': 11.885586738586426, 'learning_rate': 4.6757731563195455e-06, 'epoch': 0.8441408947893485}
{'loss': 0.1614, 'grad_norm': 28.38834571838379, 'learning_rate': 3.5246719361522522e-06, 'epoch': 0.8825109354615915}
{'loss': 0.1567, 'grad_norm': 13.282735824584961, 'learning_rate': 2.3735707159849593e-06, 'epoch': 0.9208809761338347}
{'loss': 0.161, 'grad_norm': 0.0789937973022461, 'learning_rate': 1.2224694958176656e-06, 'epoch': 0.9592510168060778}
{'loss': 0.1637, 'grad_norm': 6.418363094329834, 'learning_rate': 7.136827565037219e-08, 'epoch': 0.997621057478321}
{'eval_loss': 0.8375895023345947, 'eval_runtime': 930.7798, 'eval_samples_per_second': 178.323, 'eval_steps_per_second': 0.697, 'epoch': 1.0}
{'train_runtime': 4471.6031, 'train_samples_per_second': 46.627, 'train_steps_per_second': 2.914, 'train_loss': 0.3422235724254705, 'epoch': 1.0}
Post-processing 251162 example predictions split into 512118 features.
{
    "89": {
        "QA": {
            "exact_match": 30.224217172801854,
            "f1": 72.26240312108538
        },
        "PR": {
            "p@1": 0.9626304711996907,
            "p@2": 0.9981959537820541,
            "p@3": 0.9993986512606847
        },
        "PRQA": {
            "exact_match": 29.418839396933123,
            "f1": 70.8223022074591
        }
    }
}
slurmstepd: error: common_file_write_uint32s: write pid 3658836 to /sys/fs/cgroup/cgroup.procs failed: Device or resource busy
slurmstepd: error: Unable to move pid 3658836 to init root cgroup /sys/fs/cgroup
slurmstepd: error: error unlocking cgroup '/sys/fs/cgroup/system.slice/slurmstepd.scope' : Bad file descriptor
