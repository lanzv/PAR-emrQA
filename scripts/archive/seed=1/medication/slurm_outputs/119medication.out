2024-05-09 15:16:00 INFO     ------------- Experiment: model ClinicalBERT, frequency threshold 119 ---------------
2024-05-09 15:16:00 INFO     Contexts were splited into 4977 sentence groups, which are 27.19672131147541 groups on average per one report
2024-05-09 15:16:01 INFO     Contexts were splited into 672 paragraphs, which are 3.6721311475409837 paragraphs on average per one report. There are 3 unique topics with frequency threshold (greater or equal) 119. The overall paragraph average length (characters) is 1817.0059523809523
2024-05-09 15:16:01 INFO     Contexts were splited into 818 sentence groups, which are 31.46153846153846 groups on average per one report
2024-05-09 15:16:02 INFO     Contexts were splited into 58 paragraphs, which are 2.230769230769231 paragraphs on average per one report. There are 3 unique topics with frequency threshold (greater or equal) 119. The overall paragraph average length (characters) is 3159.603448275862
2024-05-09 15:16:02 INFO     Contexts were splited into 1362 sentence groups, which are 25.69811320754717 groups on average per one report
2024-05-09 15:16:03 WARNING  The evidenc 'CEFPODOXIME PROXETIL 200 MG PO BID X 16 doses
Food/Drug Interaction Instruction Give with meals
' is in wrong format and it does not occure in the paragraph 'POTENTIALLY SERIOUS INTERACTION: WARFARIN &amp; SIMVASTATIN
Reason for override: already tolerated , home medication ,
aware
CEFPODOXIME PROXETIL 200 MG PO BID X 16 doses
Starting Today ( 6/25 ) HOLD IF: rash
Food/Drug Interaction Instruction Give with meals
Alert overridden: Override added on 11/4/05 by :
on order for CEFPODOXIME PROXETIL PO ( ref # 703442345 )
Pt. has a POSSIBLE allergy to Penicillins; reaction is
RASH. Reason for override: cannot tolerate floroquinolones
and needs gram neg coverage. has
tolerated cefalosporins well in the past.
'
2024-05-09 15:16:03 INFO     Contexts were splited into 184 paragraphs, which are 3.4716981132075473 paragraphs on average per one report. There are 3 unique topics with frequency threshold (greater or equal) 119. The overall paragraph average length (characters) is 1868.5271739130435
2024-05-09 15:16:12 INFO     datasets are converted to Datset format
Some weights of BertForQuestionAnswering were not initialized from the model checkpoint at ../models/Bio_ClinicalBERT and are newly initialized: ['qa_outputs.bias', 'qa_outputs.weight']
You should probably TRAIN this model on a down-stream task to be able to use it for predictions and inference.
2024-05-09 15:20:27 INFO     training data are prepared
/home/lanz/.local/lib/python3.10/site-packages/transformers/training_args.py:1463: FutureWarning: `evaluation_strategy` is deprecated and will be removed in version 4.46 of ðŸ¤— Transformers. Use `eval_strategy` instead
  warnings.warn(
2024-05-09 16:40:56 INFO     the model is trained
2024-05-09 16:46:54 INFO     evaluation data are prepared
2024-05-09 18:02:19 INFO     QA scores: {'exact_match': 30.763283364116663, 'f1': 71.7670924388075}
2024-05-09 18:02:19 INFO     PR scores: {'p@1': 0.9725956788797732, 'p@2': 0.9980885700786049, 'p@3': 1.0}
2024-05-09 18:02:21 INFO     PRQA scores: {'exact_match': 30.14904858038744, 'f1': 70.66425260589219}
{'loss': 1.0532, 'grad_norm': 6.00177526473999, 'learning_rate': 2.894232125229164e-05, 'epoch': 0.03525595825694543}
{'loss': 0.6809, 'grad_norm': 1.9588978290557861, 'learning_rate': 2.7884642504583275e-05, 'epoch': 0.07051191651389085}
{'loss': 0.6085, 'grad_norm': 4.18400239944458, 'learning_rate': 2.6826963756874914e-05, 'epoch': 0.10576787477083627}
{'loss': 0.5555, 'grad_norm': 5.653470993041992, 'learning_rate': 2.576928500916655e-05, 'epoch': 0.1410238330277817}
{'loss': 0.5074, 'grad_norm': 1.5176479816436768, 'learning_rate': 2.4711606261458185e-05, 'epoch': 0.17627979128472712}
{'loss': 0.4817, 'grad_norm': 4.7254252433776855, 'learning_rate': 2.3653927513749824e-05, 'epoch': 0.21153574954167254}
{'loss': 0.4471, 'grad_norm': 6.960771560668945, 'learning_rate': 2.2596248766041463e-05, 'epoch': 0.24679170779861798}
{'loss': 0.4082, 'grad_norm': 8.432284355163574, 'learning_rate': 2.15385700183331e-05, 'epoch': 0.2820476660555634}
{'loss': 0.3945, 'grad_norm': 9.692560195922852, 'learning_rate': 2.0480891270624737e-05, 'epoch': 0.3173036243125088}
{'loss': 0.3539, 'grad_norm': 4.806989669799805, 'learning_rate': 1.9423212522916376e-05, 'epoch': 0.35255958256945424}
{'loss': 0.3439, 'grad_norm': 5.55094051361084, 'learning_rate': 1.836553377520801e-05, 'epoch': 0.3878155408263997}
{'loss': 0.3191, 'grad_norm': 9.950098037719727, 'learning_rate': 1.7307855027499647e-05, 'epoch': 0.42307149908334507}
{'loss': 0.2993, 'grad_norm': 18.305856704711914, 'learning_rate': 1.6250176279791286e-05, 'epoch': 0.4583274573402905}
{'loss': 0.2819, 'grad_norm': 16.66215705871582, 'learning_rate': 1.5192497532082922e-05, 'epoch': 0.49358341559723595}
{'loss': 0.2767, 'grad_norm': 11.71199893951416, 'learning_rate': 1.413481878437456e-05, 'epoch': 0.5288393738541813}
{'loss': 0.2635, 'grad_norm': 0.6806347966194153, 'learning_rate': 1.3077140036666196e-05, 'epoch': 0.5640953321111268}
{'loss': 0.2436, 'grad_norm': 9.892168998718262, 'learning_rate': 1.2019461288957833e-05, 'epoch': 0.5993512903680722}
{'loss': 0.217, 'grad_norm': 1.5677119493484497, 'learning_rate': 1.0961782541249472e-05, 'epoch': 0.6346072486250176}
{'loss': 0.2099, 'grad_norm': 1.4976222515106201, 'learning_rate': 9.90410379354111e-06, 'epoch': 0.6698632068819631}
{'loss': 0.1971, 'grad_norm': 21.678544998168945, 'learning_rate': 8.846425045832745e-06, 'epoch': 0.7051191651389085}
{'loss': 0.1972, 'grad_norm': 8.642190933227539, 'learning_rate': 7.788746298124384e-06, 'epoch': 0.7403751233958539}
{'loss': 0.1726, 'grad_norm': 16.525772094726562, 'learning_rate': 6.731067550416021e-06, 'epoch': 0.7756310816527994}
{'loss': 0.1892, 'grad_norm': 18.054506301879883, 'learning_rate': 5.6733888027076575e-06, 'epoch': 0.8108870399097448}
{'loss': 0.1744, 'grad_norm': 0.6376880407333374, 'learning_rate': 4.615710054999295e-06, 'epoch': 0.8461429981666901}
{'loss': 0.184, 'grad_norm': 15.577842712402344, 'learning_rate': 3.5580313072909323e-06, 'epoch': 0.8813989564236356}
{'loss': 0.1699, 'grad_norm': 17.89961051940918, 'learning_rate': 2.5003525595825696e-06, 'epoch': 0.916654914680581}
{'loss': 0.1563, 'grad_norm': 9.948662757873535, 'learning_rate': 1.4426738118742068e-06, 'epoch': 0.9519108729375264}
{'loss': 0.1638, 'grad_norm': 0.5615053772926331, 'learning_rate': 3.8499506416584403e-07, 'epoch': 0.9871668311944719}
{'eval_loss': 0.8074057102203369, 'eval_runtime': 1004.0245, 'eval_samples_per_second': 179.699, 'eval_steps_per_second': 0.702, 'epoch': 1.0}
{'train_runtime': 4828.2203, 'train_samples_per_second': 46.995, 'train_steps_per_second': 2.937, 'train_loss': 0.33838321224218565, 'epoch': 1.0}
Post-processing 172858 example predictions split into 452291 features.
{
    "119": {
        "QA": {
            "exact_match": 30.763283364116663,
            "f1": 71.7670924388075
        },
        "PR": {
            "p@1": 0.9725956788797732,
            "p@2": 0.9980885700786049,
            "p@3": 1.0
        },
        "PRQA": {
            "exact_match": 30.14904858038744,
            "f1": 70.66425260589219
        }
    }
}
slurmstepd: error: common_file_write_uint32s: write pid 2662052 to /sys/fs/cgroup/cgroup.procs failed: Device or resource busy
slurmstepd: error: Unable to move pid 2662052 to init root cgroup /sys/fs/cgroup
slurmstepd: error: error unlocking cgroup '/sys/fs/cgroup/system.slice/slurmstepd.scope' : Bad file descriptor
