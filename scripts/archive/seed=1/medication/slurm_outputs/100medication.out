2024-05-09 15:16:00 INFO     ------------- Experiment: model ClinicalBERT, frequency threshold 100 ---------------
2024-05-09 15:16:01 INFO     Contexts were splited into 4977 sentence groups, which are 27.19672131147541 groups on average per one report
2024-05-09 15:16:01 INFO     Contexts were splited into 790 paragraphs, which are 4.316939890710382 paragraphs on average per one report. There are 4 unique topics with frequency threshold (greater or equal) 100. The overall paragraph average length (characters) is 1545.6050632911392
2024-05-09 15:16:02 INFO     Contexts were splited into 818 sentence groups, which are 31.46153846153846 groups on average per one report
2024-05-09 15:16:02 INFO     Contexts were splited into 74 paragraphs, which are 2.8461538461538463 paragraphs on average per one report. There are 4 unique topics with frequency threshold (greater or equal) 100. The overall paragraph average length (characters) is 2476.445945945946
2024-05-09 15:16:02 INFO     Contexts were splited into 1362 sentence groups, which are 25.69811320754717 groups on average per one report
2024-05-09 15:16:03 WARNING  The evidenc 'CEFPODOXIME PROXETIL 200 MG PO BID X 16 doses
Food/Drug Interaction Instruction Give with meals
' is in wrong format and it does not occure in the paragraph 'POTENTIALLY SERIOUS INTERACTION: WARFARIN &amp; SIMVASTATIN
Reason for override: already tolerated , home medication ,
aware
CEFPODOXIME PROXETIL 200 MG PO BID X 16 doses
Starting Today ( 6/25 ) HOLD IF: rash
Food/Drug Interaction Instruction Give with meals
Alert overridden: Override added on 11/4/05 by :
on order for CEFPODOXIME PROXETIL PO ( ref # 703442345 )
Pt. has a POSSIBLE allergy to Penicillins; reaction is
RASH. Reason for override: cannot tolerate floroquinolones
and needs gram neg coverage. has
tolerated cefalosporins well in the past.
'
2024-05-09 15:16:03 INFO     Contexts were splited into 224 paragraphs, which are 4.226415094339623 paragraphs on average per one report. There are 4 unique topics with frequency threshold (greater or equal) 100. The overall paragraph average length (characters) is 1534.861607142857
2024-05-09 15:16:12 INFO     datasets are converted to Datset format
Some weights of BertForQuestionAnswering were not initialized from the model checkpoint at ../models/Bio_ClinicalBERT and are newly initialized: ['qa_outputs.bias', 'qa_outputs.weight']
You should probably TRAIN this model on a down-stream task to be able to use it for predictions and inference.
2024-05-09 15:20:12 INFO     training data are prepared
/home/lanz/.local/lib/python3.10/site-packages/transformers/training_args.py:1463: FutureWarning: `evaluation_strategy` is deprecated and will be removed in version 4.46 of ðŸ¤— Transformers. Use `eval_strategy` instead
  warnings.warn(
2024-05-09 16:38:42 INFO     the model is trained
2024-05-09 16:44:36 INFO     evaluation data are prepared
2024-05-09 18:03:30 INFO     QA scores: {'exact_match': 30.10394742493879, 'f1': 71.5858397209128}
2024-05-09 18:03:30 INFO     PR scores: {'p@1': 0.9718225162149392, 'p@2': 0.9977234654868777, 'p@3': 0.9991624071130966}
2024-05-09 18:03:33 INFO     PRQA scores: {'exact_match': 29.427430093209054, 'f1': 70.55466278055306}
{'loss': 1.001, 'grad_norm': 5.714369773864746, 'learning_rate': 2.8913515862668408e-05, 'epoch': 0.036216137911053166}
{'loss': 0.6275, 'grad_norm': 3.0340726375579834, 'learning_rate': 2.782703172533681e-05, 'epoch': 0.07243227582210633}
{'loss': 0.5996, 'grad_norm': 8.814230918884277, 'learning_rate': 2.6740547588005218e-05, 'epoch': 0.10864841373315949}
{'loss': 0.558, 'grad_norm': 3.2585232257843018, 'learning_rate': 2.565406345067362e-05, 'epoch': 0.14486455164421266}
{'loss': 0.5181, 'grad_norm': 6.2378129959106445, 'learning_rate': 2.456757931334203e-05, 'epoch': 0.18108068955526582}
{'loss': 0.4413, 'grad_norm': 7.782371997833252, 'learning_rate': 2.3481095176010432e-05, 'epoch': 0.21729682746631898}
{'loss': 0.4354, 'grad_norm': 13.645617485046387, 'learning_rate': 2.239461103867884e-05, 'epoch': 0.25351296537737217}
{'loss': 0.4178, 'grad_norm': 5.297633171081543, 'learning_rate': 2.1308126901347242e-05, 'epoch': 0.2897291032884253}
{'loss': 0.3697, 'grad_norm': 6.259050369262695, 'learning_rate': 2.0221642764015646e-05, 'epoch': 0.3259452411994785}
{'loss': 0.3444, 'grad_norm': 7.9675421714782715, 'learning_rate': 1.913515862668405e-05, 'epoch': 0.36216137911053164}
{'loss': 0.3235, 'grad_norm': 8.511219024658203, 'learning_rate': 1.8048674489352456e-05, 'epoch': 0.3983775170215848}
{'loss': 0.3107, 'grad_norm': 10.755188941955566, 'learning_rate': 1.696219035202086e-05, 'epoch': 0.43459365493263796}
{'loss': 0.2727, 'grad_norm': 13.530844688415527, 'learning_rate': 1.5875706214689266e-05, 'epoch': 0.4708097928436911}
{'loss': 0.2639, 'grad_norm': 10.530256271362305, 'learning_rate': 1.478922207735767e-05, 'epoch': 0.5070259307547443}
{'loss': 0.2628, 'grad_norm': 4.456770896911621, 'learning_rate': 1.3702737940026075e-05, 'epoch': 0.5432420686657975}
{'loss': 0.2217, 'grad_norm': 10.690650939941406, 'learning_rate': 1.261625380269448e-05, 'epoch': 0.5794582065768507}
{'loss': 0.2171, 'grad_norm': 15.991612434387207, 'learning_rate': 1.1529769665362886e-05, 'epoch': 0.6156743444879038}
{'loss': 0.2258, 'grad_norm': 12.195113182067871, 'learning_rate': 1.044328552803129e-05, 'epoch': 0.651890482398957}
{'loss': 0.2102, 'grad_norm': 16.223098754882812, 'learning_rate': 9.356801390699696e-06, 'epoch': 0.6881066203100101}
{'loss': 0.194, 'grad_norm': 14.524853706359863, 'learning_rate': 8.270317253368101e-06, 'epoch': 0.7243227582210633}
{'loss': 0.175, 'grad_norm': 5.299087047576904, 'learning_rate': 7.183833116036506e-06, 'epoch': 0.7605388961321164}
{'loss': 0.1706, 'grad_norm': 9.209028244018555, 'learning_rate': 6.0973489787049115e-06, 'epoch': 0.7967550340431696}
{'loss': 0.1549, 'grad_norm': 20.257015228271484, 'learning_rate': 5.010864841373317e-06, 'epoch': 0.8329711719542228}
{'loss': 0.1691, 'grad_norm': 0.7238841652870178, 'learning_rate': 3.924380704041722e-06, 'epoch': 0.8691873098652759}
{'loss': 0.1541, 'grad_norm': 18.02332878112793, 'learning_rate': 2.837896566710126e-06, 'epoch': 0.9054034477763291}
{'loss': 0.1667, 'grad_norm': 15.940363883972168, 'learning_rate': 1.7514124293785311e-06, 'epoch': 0.9416195856873822}
{'loss': 0.1421, 'grad_norm': 29.641326904296875, 'learning_rate': 6.649282920469362e-07, 'epoch': 0.9778357235984355}
{'eval_loss': 0.8260244727134705, 'eval_runtime': 984.1011, 'eval_samples_per_second': 179.43, 'eval_steps_per_second': 0.701, 'epoch': 1.0}
{'train_runtime': 4709.8852, 'train_samples_per_second': 46.9, 'train_steps_per_second': 2.931, 'train_loss': 0.32722741217781076, 'epoch': 1.0}
Post-processing 205344 example predictions split into 474369 features.
{
    "100": {
        "QA": {
            "exact_match": 30.10394742493879,
            "f1": 71.5858397209128
        },
        "PR": {
            "p@1": 0.9718225162149392,
            "p@2": 0.9977234654868777,
            "p@3": 0.9991624071130966
        },
        "PRQA": {
            "exact_match": 29.427430093209054,
            "f1": 70.55466278055306
        }
    }
}
slurmstepd: error: common_file_write_uint32s: write pid 3658835 to /sys/fs/cgroup/cgroup.procs failed: Device or resource busy
slurmstepd: error: Unable to move pid 3658835 to init root cgroup /sys/fs/cgroup
slurmstepd: error: error unlocking cgroup '/sys/fs/cgroup/system.slice/slurmstepd.scope' : Bad file descriptor
