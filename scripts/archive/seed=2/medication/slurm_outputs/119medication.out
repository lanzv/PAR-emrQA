2024-05-11 12:22:39 INFO     ------------- Experiment: model ClinicalBERT, frequency threshold 119 ---------------
2024-05-11 12:22:39 INFO     Contexts were splited into 4977 sentence groups, which are 27.19672131147541 groups on average per one report
2024-05-11 12:22:40 INFO     Contexts were splited into 672 paragraphs, which are 3.6721311475409837 paragraphs on average per one report. There are 3 unique topics with frequency threshold (greater or equal) 119. The overall paragraph average length (characters) is 1817.0059523809523
2024-05-11 12:22:40 INFO     Contexts were splited into 818 sentence groups, which are 31.46153846153846 groups on average per one report
2024-05-11 12:22:41 INFO     Contexts were splited into 58 paragraphs, which are 2.230769230769231 paragraphs on average per one report. There are 3 unique topics with frequency threshold (greater or equal) 119. The overall paragraph average length (characters) is 3159.603448275862
2024-05-11 12:22:41 INFO     Contexts were splited into 1362 sentence groups, which are 25.69811320754717 groups on average per one report
2024-05-11 12:22:42 WARNING  The evidenc 'CEFPODOXIME PROXETIL 200 MG PO BID X 16 doses
Food/Drug Interaction Instruction Give with meals
' is in wrong format and it does not occure in the paragraph 'POTENTIALLY SERIOUS INTERACTION: WARFARIN &amp; SIMVASTATIN
Reason for override: already tolerated , home medication ,
aware
CEFPODOXIME PROXETIL 200 MG PO BID X 16 doses
Starting Today ( 6/25 ) HOLD IF: rash
Food/Drug Interaction Instruction Give with meals
Alert overridden: Override added on 11/4/05 by :
on order for CEFPODOXIME PROXETIL PO ( ref # 703442345 )
Pt. has a POSSIBLE allergy to Penicillins; reaction is
RASH. Reason for override: cannot tolerate floroquinolones
and needs gram neg coverage. has
tolerated cefalosporins well in the past.
'
2024-05-11 12:22:42 INFO     Contexts were splited into 184 paragraphs, which are 3.4716981132075473 paragraphs on average per one report. There are 3 unique topics with frequency threshold (greater or equal) 119. The overall paragraph average length (characters) is 1868.5271739130435
2024-05-11 12:22:51 INFO     datasets are converted to Datset format
Some weights of BertForQuestionAnswering were not initialized from the model checkpoint at ../models/Bio_ClinicalBERT and are newly initialized: ['qa_outputs.bias', 'qa_outputs.weight']
You should probably TRAIN this model on a down-stream task to be able to use it for predictions and inference.
2024-05-11 12:27:07 INFO     training data are prepared
/home/lanz/.local/lib/python3.10/site-packages/transformers/training_args.py:1463: FutureWarning: `evaluation_strategy` is deprecated and will be removed in version 4.46 of ðŸ¤— Transformers. Use `eval_strategy` instead
  warnings.warn(
2024-05-11 13:47:36 INFO     the model is trained
2024-05-11 13:53:30 INFO     evaluation data are prepared
2024-05-11 15:08:51 INFO     QA scores: {'exact_match': 30.95013100811821, 'f1': 72.29784345402938}
2024-05-11 15:08:51 INFO     PR scores: {'p@1': 0.9761608178342854, 'p@2': 0.9980456165972252, 'p@3': 0.999871139555861}
2024-05-11 15:08:53 INFO     PRQA scores: {'exact_match': 30.419655513079334, 'f1': 71.45939279651283}
{'loss': 1.0475, 'grad_norm': 12.8717679977417, 'learning_rate': 2.89417242839001e-05, 'epoch': 0.03527585720333004}
{'loss': 0.6586, 'grad_norm': 6.4159345626831055, 'learning_rate': 2.7883448567800197e-05, 'epoch': 0.07055171440666008}
{'loss': 0.5939, 'grad_norm': 5.048491954803467, 'learning_rate': 2.6825172851700297e-05, 'epoch': 0.10582757160999012}
{'loss': 0.5366, 'grad_norm': 8.819416999816895, 'learning_rate': 2.5766897135600397e-05, 'epoch': 0.14110342881332016}
{'loss': 0.5014, 'grad_norm': 6.406758785247803, 'learning_rate': 2.4708621419500494e-05, 'epoch': 0.1763792860166502}
{'loss': 0.4631, 'grad_norm': 9.75130558013916, 'learning_rate': 2.3650345703400594e-05, 'epoch': 0.21165514321998025}
{'loss': 0.4279, 'grad_norm': 7.819769382476807, 'learning_rate': 2.259206998730069e-05, 'epoch': 0.2469310004233103}
{'loss': 0.3889, 'grad_norm': 3.0215251445770264, 'learning_rate': 2.153379427120079e-05, 'epoch': 0.28220685762664033}
{'loss': 0.3797, 'grad_norm': 12.848830223083496, 'learning_rate': 2.047551855510089e-05, 'epoch': 0.31748271482997037}
{'loss': 0.3596, 'grad_norm': 1.9228633642196655, 'learning_rate': 1.9417242839000987e-05, 'epoch': 0.3527585720333004}
{'loss': 0.3322, 'grad_norm': 5.396093368530273, 'learning_rate': 1.8358967122901087e-05, 'epoch': 0.38803442923663045}
{'loss': 0.2983, 'grad_norm': 7.011828422546387, 'learning_rate': 1.7300691406801187e-05, 'epoch': 0.4233102864399605}
{'loss': 0.2874, 'grad_norm': 30.41554832458496, 'learning_rate': 1.6242415690701284e-05, 'epoch': 0.45858614364329053}
{'loss': 0.2631, 'grad_norm': 17.04729461669922, 'learning_rate': 1.5184139974601384e-05, 'epoch': 0.4938620008466206}
{'loss': 0.2735, 'grad_norm': 5.6112823486328125, 'learning_rate': 1.4125864258501482e-05, 'epoch': 0.5291378580499506}
{'loss': 0.244, 'grad_norm': 8.754260063171387, 'learning_rate': 1.306758854240158e-05, 'epoch': 0.5644137152532807}
{'loss': 0.2224, 'grad_norm': 9.175156593322754, 'learning_rate': 1.200931282630168e-05, 'epoch': 0.5996895724566107}
{'loss': 0.2168, 'grad_norm': 5.4163103103637695, 'learning_rate': 1.0951037110201778e-05, 'epoch': 0.6349654296599407}
{'loss': 0.1951, 'grad_norm': 7.668271064758301, 'learning_rate': 9.892761394101877e-06, 'epoch': 0.6702412868632708}
{'loss': 0.1864, 'grad_norm': 11.676880836486816, 'learning_rate': 8.834485678001975e-06, 'epoch': 0.7055171440666008}
{'loss': 0.1791, 'grad_norm': 5.124833106994629, 'learning_rate': 7.776209961902075e-06, 'epoch': 0.7407930012699309}
{'loss': 0.179, 'grad_norm': 13.437446594238281, 'learning_rate': 6.717934245802173e-06, 'epoch': 0.7760688584732609}
{'loss': 0.1593, 'grad_norm': 15.286865234375, 'learning_rate': 5.659658529702272e-06, 'epoch': 0.8113447156765909}
{'loss': 0.1612, 'grad_norm': 6.872656345367432, 'learning_rate': 4.601382813602371e-06, 'epoch': 0.846620572879921}
{'loss': 0.1632, 'grad_norm': 0.3083112835884094, 'learning_rate': 3.5431070975024695e-06, 'epoch': 0.881896430083251}
{'loss': 0.1487, 'grad_norm': 20.909326553344727, 'learning_rate': 2.4848313814025682e-06, 'epoch': 0.9171722872865811}
{'loss': 0.1413, 'grad_norm': 24.419963836669922, 'learning_rate': 1.4265556653026667e-06, 'epoch': 0.9524481444899111}
{'loss': 0.1482, 'grad_norm': 10.374944686889648, 'learning_rate': 3.6827994920276565e-07, 'epoch': 0.9877240016932411}
{'eval_loss': 0.8560816645622253, 'eval_runtime': 1004.4557, 'eval_samples_per_second': 179.622, 'eval_steps_per_second': 0.702, 'epoch': 1.0}
{'train_runtime': 4828.1647, 'train_samples_per_second': 46.968, 'train_steps_per_second': 2.936, 'train_loss': 0.32458558398139514, 'epoch': 1.0}
Post-processing 172858 example predictions split into 452291 features.
{
    "119": {
        "QA": {
            "exact_match": 30.95013100811821,
            "f1": 72.29784345402938
        },
        "PR": {
            "p@1": 0.9761608178342854,
            "p@2": 0.9980456165972252,
            "p@3": 0.999871139555861
        },
        "PRQA": {
            "exact_match": 30.419655513079334,
            "f1": 71.45939279651283
        }
    }
}
slurmstepd: error: common_file_write_uint32s: write pid 2669980 to /sys/fs/cgroup/cgroup.procs failed: Device or resource busy
slurmstepd: error: Unable to move pid 2669980 to init root cgroup /sys/fs/cgroup
slurmstepd: error: error unlocking cgroup '/sys/fs/cgroup/system.slice/slurmstepd.scope' : Bad file descriptor
