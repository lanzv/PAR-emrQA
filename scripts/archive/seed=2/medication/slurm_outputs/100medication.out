2024-05-11 12:22:39 INFO     ------------- Experiment: model ClinicalBERT, frequency threshold 100 ---------------
2024-05-11 12:22:39 INFO     Contexts were splited into 4977 sentence groups, which are 27.19672131147541 groups on average per one report
2024-05-11 12:22:39 INFO     Contexts were splited into 790 paragraphs, which are 4.316939890710382 paragraphs on average per one report. There are 4 unique topics with frequency threshold (greater or equal) 100. The overall paragraph average length (characters) is 1545.6050632911392
2024-05-11 12:22:40 INFO     Contexts were splited into 818 sentence groups, which are 31.46153846153846 groups on average per one report
2024-05-11 12:22:40 INFO     Contexts were splited into 74 paragraphs, which are 2.8461538461538463 paragraphs on average per one report. There are 4 unique topics with frequency threshold (greater or equal) 100. The overall paragraph average length (characters) is 2476.445945945946
2024-05-11 12:22:40 INFO     Contexts were splited into 1362 sentence groups, which are 25.69811320754717 groups on average per one report
2024-05-11 12:22:41 WARNING  The evidenc 'CEFPODOXIME PROXETIL 200 MG PO BID X 16 doses
Food/Drug Interaction Instruction Give with meals
' is in wrong format and it does not occure in the paragraph 'POTENTIALLY SERIOUS INTERACTION: WARFARIN &amp; SIMVASTATIN
Reason for override: already tolerated , home medication ,
aware
CEFPODOXIME PROXETIL 200 MG PO BID X 16 doses
Starting Today ( 6/25 ) HOLD IF: rash
Food/Drug Interaction Instruction Give with meals
Alert overridden: Override added on 11/4/05 by :
on order for CEFPODOXIME PROXETIL PO ( ref # 703442345 )
Pt. has a POSSIBLE allergy to Penicillins; reaction is
RASH. Reason for override: cannot tolerate floroquinolones
and needs gram neg coverage. has
tolerated cefalosporins well in the past.
'
2024-05-11 12:22:41 INFO     Contexts were splited into 224 paragraphs, which are 4.226415094339623 paragraphs on average per one report. There are 4 unique topics with frequency threshold (greater or equal) 100. The overall paragraph average length (characters) is 1534.861607142857
2024-05-11 12:22:50 INFO     datasets are converted to Datset format
Some weights of BertForQuestionAnswering were not initialized from the model checkpoint at ../models/Bio_ClinicalBERT and are newly initialized: ['qa_outputs.bias', 'qa_outputs.weight']
You should probably TRAIN this model on a down-stream task to be able to use it for predictions and inference.
2024-05-11 12:26:50 INFO     training data are prepared
/home/lanz/.local/lib/python3.10/site-packages/transformers/training_args.py:1463: FutureWarning: `evaluation_strategy` is deprecated and will be removed in version 4.46 of ðŸ¤— Transformers. Use `eval_strategy` instead
  warnings.warn(
2024-05-11 13:45:22 INFO     the model is trained
2024-05-11 13:51:15 INFO     evaluation data are prepared
2024-05-11 15:09:58 INFO     QA scores: {'exact_match': 30.05669859542116, 'f1': 71.43522066464061}
2024-05-11 15:09:58 INFO     PR scores: {'p@1': 0.9695889351831966, 'p@2': 0.9967570121558352, 'p@3': 0.9996993256303424}
2024-05-11 15:10:01 INFO     PRQA scores: {'exact_match': 29.47467892272669, 'f1': 70.39889445506041}
{'loss': 1.0621, 'grad_norm': 21.024616241455078, 'learning_rate': 2.891304347826087e-05, 'epoch': 0.036231884057971016}
{'loss': 0.6838, 'grad_norm': 8.22162914276123, 'learning_rate': 2.782608695652174e-05, 'epoch': 0.07246376811594203}
{'loss': 0.5634, 'grad_norm': 7.071821212768555, 'learning_rate': 2.673913043478261e-05, 'epoch': 0.10869565217391304}
{'loss': 0.5482, 'grad_norm': 9.995849609375, 'learning_rate': 2.565217391304348e-05, 'epoch': 0.14492753623188406}
{'loss': 0.5129, 'grad_norm': 7.073465824127197, 'learning_rate': 2.456521739130435e-05, 'epoch': 0.18115942028985507}
{'loss': 0.4862, 'grad_norm': 11.056668281555176, 'learning_rate': 2.347826086956522e-05, 'epoch': 0.21739130434782608}
{'loss': 0.449, 'grad_norm': 8.083498001098633, 'learning_rate': 2.239130434782609e-05, 'epoch': 0.2536231884057971}
{'loss': 0.4031, 'grad_norm': 12.445226669311523, 'learning_rate': 2.1304347826086958e-05, 'epoch': 0.2898550724637681}
{'loss': 0.3823, 'grad_norm': 13.110390663146973, 'learning_rate': 2.0217391304347828e-05, 'epoch': 0.32608695652173914}
{'loss': 0.3455, 'grad_norm': 6.979408264160156, 'learning_rate': 1.9130434782608694e-05, 'epoch': 0.36231884057971014}
{'loss': 0.3451, 'grad_norm': 8.3291015625, 'learning_rate': 1.8043478260869567e-05, 'epoch': 0.39855072463768115}
{'loss': 0.313, 'grad_norm': 12.102770805358887, 'learning_rate': 1.6956521739130433e-05, 'epoch': 0.43478260869565216}
{'loss': 0.2968, 'grad_norm': 11.977758407592773, 'learning_rate': 1.5869565217391306e-05, 'epoch': 0.47101449275362317}
{'loss': 0.2543, 'grad_norm': 11.975481033325195, 'learning_rate': 1.4782608695652174e-05, 'epoch': 0.5072463768115942}
{'loss': 0.244, 'grad_norm': 7.232602119445801, 'learning_rate': 1.3695652173913042e-05, 'epoch': 0.5434782608695652}
{'loss': 0.2444, 'grad_norm': 8.21157455444336, 'learning_rate': 1.2608695652173912e-05, 'epoch': 0.5797101449275363}
{'loss': 0.2235, 'grad_norm': 16.24279022216797, 'learning_rate': 1.1521739130434782e-05, 'epoch': 0.6159420289855072}
{'loss': 0.1999, 'grad_norm': 5.187777996063232, 'learning_rate': 1.0434782608695653e-05, 'epoch': 0.6521739130434783}
{'loss': 0.1976, 'grad_norm': 39.0568733215332, 'learning_rate': 9.347826086956523e-06, 'epoch': 0.6884057971014492}
{'loss': 0.1739, 'grad_norm': 4.84288215637207, 'learning_rate': 8.260869565217392e-06, 'epoch': 0.7246376811594203}
{'loss': 0.1764, 'grad_norm': 13.381135940551758, 'learning_rate': 7.173913043478261e-06, 'epoch': 0.7608695652173914}
{'loss': 0.1771, 'grad_norm': 13.328993797302246, 'learning_rate': 6.086956521739131e-06, 'epoch': 0.7971014492753623}
{'loss': 0.1582, 'grad_norm': 4.251768589019775, 'learning_rate': 4.9999999999999996e-06, 'epoch': 0.8333333333333334}
{'loss': 0.1568, 'grad_norm': 15.951375007629395, 'learning_rate': 3.913043478260869e-06, 'epoch': 0.8695652173913043}
{'loss': 0.1494, 'grad_norm': 11.371219635009766, 'learning_rate': 2.8260869565217393e-06, 'epoch': 0.9057971014492754}
{'loss': 0.1513, 'grad_norm': 3.0886571407318115, 'learning_rate': 1.7391304347826088e-06, 'epoch': 0.9420289855072463}
{'loss': 0.1496, 'grad_norm': 32.4664306640625, 'learning_rate': 6.521739130434783e-07, 'epoch': 0.9782608695652174}
{'eval_loss': 0.8431344628334045, 'eval_runtime': 985.1997, 'eval_samples_per_second': 179.23, 'eval_steps_per_second': 0.7, 'epoch': 1.0}
{'train_runtime': 4711.1454, 'train_samples_per_second': 46.865, 'train_steps_per_second': 2.929, 'train_loss': 0.33089650665504344, 'epoch': 1.0}
Post-processing 205344 example predictions split into 474369 features.
{
    "100": {
        "QA": {
            "exact_match": 30.05669859542116,
            "f1": 71.43522066464061
        },
        "PR": {
            "p@1": 0.9695889351831966,
            "p@2": 0.9967570121558352,
            "p@3": 0.9996993256303424
        },
        "PRQA": {
            "exact_match": 29.47467892272669,
            "f1": 70.39889445506041
        }
    }
}
slurmstepd: error: common_file_write_uint32s: write pid 3668195 to /sys/fs/cgroup/cgroup.procs failed: Device or resource busy
slurmstepd: error: Unable to move pid 3668195 to init root cgroup /sys/fs/cgroup
slurmstepd: error: error unlocking cgroup '/sys/fs/cgroup/system.slice/slurmstepd.scope' : Bad file descriptor
